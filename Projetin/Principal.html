<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>LoginDisney+ </title>
        <link rel="stylesheet" href="css/principal.css"/>
    </head>
    <body>
        <input type="text" value="">
        <button id="botão">Buscar</button>
        <div id="erro" class="erro">Nenhum Resultado Encontrado.</div>
        
        <ul class="Herois"></ul>

        <script type="text/javascript"charset= "utf-8">
            var container = document.querySelector ('ul'),
            input = document.querySelector('input');
            const timeStamp = '1618243974';
            const apiKey = 'cd50d89c84a9a1f4b7f6c6bf6ec03977';
            const md5 = '226b4e02b51dbb95afdcd22f3df94612';
            fetch (`https://gateway.marvel.com:443/v1/public/characters?ts=${timeStamp}&apikey=${apiKey}&hash=${md5}&limit=100`
            ).then((resposta) =>{
                return resposta.json();
            }).then((jsonParsed)=>{
                elementos = jsonParsed.data.count; 
     
                document.getElementById('botão').addEventListener('click', function(){
                    container.innerHTML = '';
                    document.getElementById("erro").style.display = 'none';
    
                    let contador = 0;
                    if (input.value != ''){
                        for(i=0; i<elementos;i++){
                            const nomeHeroi =  jsonParsed.data.results[i].name
                            if(nomeHeroi.includes(input.value)){
                                contador = 1;
                                const img = document.createElement('img');
                                const li = document.createElement('li');
                                img.src = jsonParsed.data.results[i].thumbnail.path+'.'+jsonParsed.data.results[i].thumbnail.extension
                                li.innerHTML = nomeHeroi;
                                li.appendChild(img)  
                                container.appendChild(li);  
                                debugger;      
                            }
                        }
                    }
                    if (contador == 0){
                        document.getElementById("erro").style.display = 'block';
                    }
                });
            })
        </script>
    </body>
</html>